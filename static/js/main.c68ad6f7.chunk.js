(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports={button:"Button_button__357J1",disabled:"Button_disabled__1GHip"}},26:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},33:function(e,t,n){e.exports=n(68)},35:function(e,t,n){},5:function(e,t,n){e.exports={App:"App_App__28qQu","App-logo":"App_App-logo__44UpN","App-logo-spin":"App_App-logo-spin__2F5pN","App-header":"App_App-header__1UAaz","App-link":"App_App-link__xg_rF",joke:"App_joke__27b-Q",loader:"App_loader__1kFsM",spin:"App_spin__1VJov"}},68:function(e,t,n){"use strict";n.r(t);var a=n(0),o=(n(35),n(4)),r=n.n(o),s=n(8),c=n(9),i=n(10),d=n(31),u=n(25),h=n(32),p=n(26),l=n.n(p),f=n(12),g=n(3),k=n(7),m=n(6),_=n.n(m),b={set:function(){},get:null};b.set=function(e,t){var n;n="string"!==typeof t?JSON.stringify(t):t,localStorage.setItem("".concat("MARKOV_CHAIN","_").concat(e.toUpperCase()),n)},b.get=function(e){try{var t=localStorage.getItem("".concat("MARKOV_CHAIN","_").concat(e.toUpperCase()));return t?JSON.parse(t):void 0}catch(n){return null}};var v=b,j="STORED_JOKES",w=function(){return function(){var e=Object(s.a)(r.a.mark(function e(t){var n,a,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:"FETCH_ALL_JOKES"}),e.prev=1,n=v.get(j),a=[],n){e.next=23;break}return e.next=8,_.a.get("https://icanhazdadjoke.com/search");case 8:n=e.sent,a=n.data.results,o=n.data.total_pages,s=2;case 12:if(!(s<=o)){e.next=20;break}return e.next=15,_.a.get("https://icanhazdadjoke.com/search?page=".concat(s));case 15:n=e.sent,(c=a).push.apply(c,Object(k.a)(n.data.results));case 17:s++,e.next=12;break;case 20:v.set(j,a),e.next=24;break;case 23:a=n;case 24:t({type:"FETCH_ALL_JOKES_SUCCESS",payload:{fetchedJokes:a}}),e.next=31;break;case 27:throw e.prev=27,e.t0=e.catch(1),t({type:"FETCH_ALL_JOKES_FAILED",payload:{error:e.t0}}),e.t0;case 31:case"end":return e.stop()}},e,this,[[1,27]])}));return function(t){return e.apply(this,arguments)}}()},A=n(11),O=function(e){return e.match(/^(why|what|who|where|did|do|how|what's)/i)},S=["a","an","the","if","or","by","but","I",",","to","the"],J=function(e,t,n){if(void 0===e||0===e.length)return!0;var a=void 0===S.find(function(t){return t===e});return n>=t&&a},E=function(){return Math.random().toString(36).substring(2)},W=function(){function e(t){var n=this;Object(c.a)(this,e),this.updateStartWords=function(e){n.startWords[e]?n.startWords[e]++:n.startWords[e]=1},this.addNewWordPairToChain=function(e,t){n.hashMap[e]={count:1,words:Object(A.a)({},t,1)}},this.increaseCountForAdjacentWord=function(e,t){n.hashMap[e].words[t]?n.hashMap[e].words[t]++:n.hashMap[e].words[t]=1,n.hashMap[e].count++},this.getRandomWordFromBeginning=function(){var e=Object.keys(n.startWords).reduce(function(e,t){return e+n.startWords[t]},0),t=Math.floor(e*Math.random()),a=0,o="";return Object.keys(n.startWords).some(function(e){return o=e,(a+=n.startWords[e])>=t&&!(!n.hashMap[e]||1===n.hashMap[e].count)}),o},this.getRandomWordFromAnotherWord=function(e){var t=Object.keys(n.hashMap[e].words).reduce(function(t,a){return t+n.hashMap[e].words[a]},0),a=Math.floor(t*Math.random()),o=0,r="";return Object.keys(n.hashMap[e].words).some(function(t){return o+=n.hashMap[e].words[t],r=t,o>=a}),r},this.handleSentenceEnd=function(e){return O(e)&&-1===e.indexOf("?")?e.slice(0,e.length-1)+"?":e.indexOf("?")>-1?e.slice(0,e.length-1)+".":e},this.generateSentence=function(){var e=n.getRandomWordFromBeginning(),t=e,a=1;do{if(!n.hashMap[e])break;a++,t+=" "+(e=n.getRandomWordFromAnotherWord(e))}while(!J(e,n.minimumWords,t.length)||n.hashMap[e]);return{sentence:(t=n.handleSentenceEnd(t)).replace(/"|\u2018|\u201c|/g,"").trim(),wordCount:a}},this.updateStorage=function(e){n.jokes.push({id:E(),joke:e}),v.set(j,n.jokes),n.calculateState(e)},this.generateJoke=function(){for(var e=n.generateSentence(),t={sentence:"",wordCount:0};e.wordCount<5;)e=n.generateSentence();if(e.wordCount<=n.minimumWords)do{t=n.generateSentence()}while(O(t.sentence));var a="".concat(e.sentence," ").concat(t.sentence);return n.updateStorage(a),a},this.jokes=t,this.words=[],this.hashMap={},this.startWords={},this.minimumWords=15,this.tokenizeWords()}return Object(i.a)(e,[{key:"tokenizeWords",value:function(){var e=this;this.jokes.forEach(function(t){var n=t.joke;e.calculateState(n)})}},{key:"calculateState",value:function(e){var t=this,n=e.replace(/[\u201d\u2018"]/g,"").split(" ");0!==n.length&&(this.updateStartWords(n[0]),n.forEach(function(e,a){var o=n[a],r=n[a+1];o!==r&&r&&(!function(e){return!!e.length&&e[0]!==e[0].toLowerCase()}(r)?t.hashMap[o]?t.increaseCountForAdjacentWord(o,r):t.addNewWordPairToChain(o,r):t.updateStartWords(r))}))}}]),e}(),C=n(18),y=n.n(C),M=function(e){var t=e.onClick,n=e.title,o=e.disabled;return a.createElement("button",{className:"".concat(y.a.button," ").concat(o&&y.a.disabled),onClick:t},n)},F=n(5),L=n.n(F),x=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={joke:""},n.fetchJokes=Object(s.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({joke:"Fetching Jokes from API, please wait..."}),e.next=3,n.props.fetchAllJokes();case 3:n.setState({joke:"Click 'Generate Joke' Button to generate new Joke"}),n.generator=new W(n.props.jokes);case 5:case"end":return e.stop()}},e,this)})),n.generateJoke=function(){var e=n.generator.generateJoke();n.setState({joke:"Joke: "+e})},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.fetchJokes()}},{key:"render",value:function(){var e=this.props.isFetching;return a.createElement("div",{className:L.a.App},a.createElement("header",{className:L.a["App-header"]},a.createElement("img",{src:l.a,className:L.a["App-logo"],alt:"logo"}),a.createElement("div",{className:L.a.joke}," ",this.state.joke," "),e&&a.createElement("div",{className:L.a.loader}),a.createElement(M,{onClick:this.generateJoke,title:"Generate Joke",disabled:e})))}}]),t}(a.Component),N=Object(f.b)(function(e){var t=e.generator;return{jokes:t.fetchedJokes,isFetching:t.isLoading}},function(e){return Object(g.b)({fetchAllJokes:w},e)})(x),H=n(29);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=n(30),K=n(14),T={isLoading:!1,fetched:!1,fetchedJokes:[]},B=Object(g.c)({generator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"FETCH_ALL_JOKES":return Object(K.a)({},e,{isLoading:!0,fetched:!1,fetchedJokes:[]});case"FETCH_ALL_JOKES_SUCCESS":return Object(K.a)({},e,{isLoading:!1,fetched:!0,fetchedJokes:Object(k.a)(e.fetchedJokes).concat(Object(k.a)(a.fetchedJokes))});case"FETCH_ALL_JOKES_FAILED":return Object(K.a)({},e,{isLoading:!1,fetched:!0,fetchedJokes:[]})}return e}});_.a.defaults.headers.common.Accept="application/json";var R=document.getElementById("root"),U=Object(g.d)(B,Object(g.a)(I.a));Object(H.render)(a.createElement(function(){return a.createElement(f.a,{store:U},a.createElement(N,null))},null),R),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,2,1]]]);
//# sourceMappingURL=main.c68ad6f7.chunk.js.map